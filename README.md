# 115zcbot

## 简介

该项目是一个基于 [p115client](https://github.com/ChenyangGao/p115client) 的 Telegram 机器人应用程序，支持115分享链接转存，离线下载，管理账户信息和转存目录。用户可以通过 Telegram 机器人与该系统进行交互，发送115分享链接或各类下载链接（磁力链接、电驴、HTTP链接等），机器人会自动将内容存到指定的115网盘目录中。

## 功能特点

- **多账号支持**：可同时配置和管理多个115账号
- **多目录管理**：每个账号可配置多个转存目录
- **混合链接处理**：自动识别并处理各类链接（115分享、磁力链接、HTTP链接等）
- **交互式操作**：通过按钮选择账号和目录，操作简便
- **账号配置管理**：直接在Telegram中添加、修改、删除账号配置

## 配置说明

在项目根目录下，您需要创建一个名为 `config.json` 的配置文件，文件内容应如下所示：

```json
{
    "cookies": {
        "账号名称": {
            "cookie": "UID=1234; CID=1234; SEID=1234; KID=1234",
            "cid": {
                "目录名称": "目录cid"
            }
        }
    },
    "tg_token": "tg机器人api token",
    "bound_user_id": "tg用户id"
}
```

### **配置项说明**

- **cookies**: 存储用户的 Cookie 信息。
  - **账号名称**: 您的账户名称，可自定义账号名称。
    - **cookie**: 包含用户的 Cookie 字符串，格式为 `UID=...; CID=...; SEID=...; KID=...`。
    - **cid**: 账户相关的目录id。
      - **目录名称**: 目录的名称，可自定义目录名称。
  
- **tg_token**: 您的 Telegram 机器人 API 令牌，用于与 Telegram 进行交互。请替换为您实际的机器人令牌。

- **bound_user_id**: 与 Telegram 用户相关联的用户 ID，填写自己的ID。

### 如何获取目录CID

1. 在115网盘中打开您要使用的目录
2. 在地址栏中，cid参数即为目录ID，例如：`https://115.com/?cid=1234567890&...`

## 使用说明

1. **安装依赖**：
   ```bash
   pip install -r requirements.txt
   ```

2. **配置**：
   - 创建并配置 `config.json` 文件，如上所示。
   - 确保已创建Telegram机器人并获取API Token

3. **运行程序**：
   ```bash
   python main.py
   ```

4. **使用机器人**：
   - `/start` - 开始使用机器人
   - `/115set` - 管理115账号配置
   - `/bind 你的用户ID` - 绑定用户ID（首次使用需要）
   - `/unbind` - 解除绑定

   发送115分享链接或其他下载链接给机器人，然后根据提示选择账号和目录，即可自动转存或添加离线下载任务。

## 注意事项

- 请妥善保管您的Cookie信息，避免泄露
- 定期检查Cookie是否过期，过期后需要更新配置
- 机器人可能无法处理某些特殊格式的链接

## 贡献

欢迎任何形式的贡献！请提交问题、功能请求或直接提交拉取请求。

## 许可证

本项目遵循 MIT 许可证。有关详细信息，请参阅 `LICENSE` 文件。
